{"version":3,"sources":["webpack:///./src/views/main/system/role/role.vue?161a","webpack:///./src/views/main/system/role/role.vue?c304","webpack:///./src/views/main/system/role/config/form-config.ts","webpack:///./src/views/main/system/role/config/table-config.ts","webpack:///./src/views/main/system/role/config/modal-config.ts","webpack:///./src/views/main/system/role/role.vue","webpack:///./src/views/main/system/role/role.vue?6b68"],"names":["_hoisted_1","class","_hoisted_2","render","_ctx","_cache","$props","$setup","$data","$options","_component_PageSearch","_resolveComponent","_component_PageContent","_component_el_tree","_component_PageModal","_openBlock","_createElementBlock","_createVNode","formConfig","pageName","tableConfig","onAddClick","handleAddClick","onEditClick","handleEditClick","ref","modalConfig","title","pageModalTitle","modalData","otherFormData","default","_withCtx","_createElementVNode","data","allMenuList","props","children","label","onCheck","handleCheck","_","formItems","type","field","placeholder","otherConfig","startPlaceholder","endPlaceholder","labelWidth","rowLayout","xs","sm","md","lg","xl","formItemStyle","padding","columnsList","prop","width","slotName","fixed","showIndexColumn","showSelectColumn","rightButtonText","span","defineComponent","name","components","PageSearch","PageContent","setup","store","useStore","computed","state","elTreeRef","selectedData","checkedKeys","halfCheckedKeys","menuList","value","addCallBack","nextTick","setCheckedKeys","editCallBack","item","leaveNodeKeys","getLeaveNodes","pageModalRef","usePageModal","__exports__"],"mappings":"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","file":"js/chunk-7ff4fb66.9ed3b2db.js","sourcesContent":["export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./role.vue?vue&type=style&index=0&id=61408e56&scoped=true&lang=less\"","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-61408e56\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"role\" }\nconst _hoisted_2 = { class: \"tree-menu\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_PageSearch = _resolveComponent(\"PageSearch\")!\n  const _component_PageContent = _resolveComponent(\"PageContent\")!\n  const _component_el_tree = _resolveComponent(\"el-tree\")!\n  const _component_PageModal = _resolveComponent(\"PageModal\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_PageSearch, {\n      formConfig: _ctx.formConfig,\n      pageName: \"role\"\n    }, null, 8, [\"formConfig\"]),\n    _createVNode(_component_PageContent, {\n      tableConfig: _ctx.tableConfig,\n      pageName: \"role\",\n      onAddClick: _ctx.handleAddClick,\n      onEditClick: _ctx.handleEditClick\n    }, null, 8, [\"tableConfig\", \"onAddClick\", \"onEditClick\"]),\n    _createVNode(_component_PageModal, {\n      ref: \"pageModalRef\",\n      modalConfig: _ctx.modalConfig,\n      title: _ctx.pageModalTitle,\n      modalData: _ctx.modalData,\n      otherFormData: _ctx.otherFormData,\n      pageName: \"role\"\n    }, {\n      default: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_2, [\n          _createVNode(_component_el_tree, {\n            ref: \"elTreeRef\",\n            data: _ctx.allMenuList,\n            props: { children: 'children', label: 'name' },\n            \"show-checkbox\": \"\",\n            \"node-key\": \"id\",\n            onCheck: _ctx.handleCheck\n          }, null, 8, [\"data\", \"onCheck\"])\n        ])\n      ]),\n      _: 1\n    }, 8, [\"modalConfig\", \"title\", \"modalData\", \"otherFormData\"])\n  ]))\n}","import { IFormConfig } from '@/base-ui/g-form/type'\r\n\r\nexport const formConfig: IFormConfig = {\r\n  formItems: [\r\n    {\r\n      type: 'text',\r\n      field: 'roleName',\r\n      label: '角色名称',\r\n      placeholder: '请输入角色名称'\r\n    },\r\n    {\r\n      type: 'text',\r\n      field: 'trueName',\r\n      label: '权限介绍',\r\n      placeholder: '请输入权限介绍'\r\n    },\r\n    {\r\n      type: 'date-picker',\r\n      field: 'createTime',\r\n      label: '创建时间',\r\n      otherConfig: {\r\n        startPlaceholder: '请选择开始时间',\r\n        endPlaceholder: '请选择结束时间'\r\n      }\r\n    }\r\n  ],\r\n  labelWidth: '120px',\r\n  rowLayout: {\r\n    xs: 24, // 屏幕 < 768px 一行显示一个表单\r\n    sm: 24, // 768px < 屏幕 < 992px 一行显示一个表单\r\n    md: 12, // 992px < 屏幕 < 1200px 一行显示两个表单\r\n    lg: 8, // 1200px < 屏幕 < 1920px 一行显示三个表单\r\n    xl: 6 // 屏幕 > 1920px 一行显示四个表单\r\n  },\r\n  formItemStyle: {\r\n    padding: '10px 5px'\r\n  }\r\n}\r\n","/**\r\n * 为什么不用prop字段作为插槽名，而单独定义一个slotName字段，\r\n * 因为prop字段绑定tabelData数组中元素的对应字段，\r\n * 而有些列比如\"操作\"列，在tabelData数组中并没有对应的字段\r\n * 而操作列又需要一个具名插槽\r\n * */\r\nimport { ITableConfig } from '@/base-ui/g-table/type'\r\n\r\nexport const tableConfig: ITableConfig = {\r\n  columnsList: [\r\n    {\r\n      label: '角色名',\r\n      prop: 'name',\r\n      width: '150px'\r\n    },\r\n    {\r\n      label: '相关权限',\r\n      prop: 'intro',\r\n      width: '150px'\r\n    },\r\n    {\r\n      label: '创建时间',\r\n      prop: 'createAt',\r\n      slotName: 'createAt',\r\n      width: '200px'\r\n    },\r\n    {\r\n      label: '更新时间',\r\n      prop: 'updateAt',\r\n      slotName: 'updateAt',\r\n      width: '200px'\r\n    },\r\n    {\r\n      label: '操作',\r\n      slotName: 'operate',\r\n      width: '200px',\r\n      fixed: 'right'\r\n    }\r\n  ],\r\n  showIndexColumn: true,\r\n  showSelectColumn: true,\r\n  title: '角色列表',\r\n  rightButtonText: '新增角色'\r\n}\r\n","import { IFormConfig } from '@/base-ui/g-form/type'\r\nexport const modalConfig: IFormConfig = {\r\n  formItems: [\r\n    {\r\n      type: 'text',\r\n      field: 'name',\r\n      label: '角色名称',\r\n      placeholder: '请输入角色名称'\r\n    },\r\n    {\r\n      type: 'text',\r\n      field: 'intro',\r\n      label: '角色描述',\r\n      placeholder: '请输入角色介绍'\r\n    }\r\n  ],\r\n  formItemStyle: {\r\n    padding: 0\r\n  },\r\n  rowLayout: {\r\n    span: 24\r\n  }\r\n}\r\n","\nimport { computed, defineComponent, ref, nextTick } from 'vue'\nimport { useStore } from '@/store'\n\nimport PageSearch from '@/components/page-search'\nimport PageContent from '@/components/page-content'\nimport { ElTree } from 'element-plus'\n\nimport { formConfig, tableConfig, modalConfig } from './config'\n\nimport { usePageModal } from '@/hooks'\n\nimport { getLeaveNodes } from '@/global/get-user-routes'\n\nexport default defineComponent({\n  name: 'role',\n  components: {\n    PageSearch,\n    PageContent\n  },\n  setup() {\n    const store = useStore()\n    const pageModalTitle = ref('')\n    const allMenuList = computed(() => store.state.allMenuList)\n    const otherFormData = ref({})\n    const elTreeRef = ref<InstanceType<typeof ElTree>>()\n\n    // 勾选权限树\n    const handleCheck = (data: any, selectedData: any) => {\n      //两个参数 data:当前次被选中的对象，checked:树当前所有被选中的对象\n      // const menuList = getLeaveNodes(selectedData.checkedNodes)\n      // checkedKeys + halfCheckedKeys = 所有处于选中状态的节点的id   half：半选中\n      const { checkedKeys, halfCheckedKeys } = selectedData\n      const menuList = [...checkedKeys, ...halfCheckedKeys]\n      otherFormData.value = { menuList }\n    }\n\n    const addCallBack = () => {\n      pageModalTitle.value = '新增角色'\n      nextTick(() => {\n        // 点击新增时，清空选中的节点\n        elTreeRef.value?.setCheckedKeys([], false)\n      })\n    }\n    const editCallBack = (item: any) => {\n      pageModalTitle.value = '编辑角色'\n      const leaveNodeKeys = getLeaveNodes(item.menuList)\n\n      nextTick(() => {\n        // 点击编辑时，因为elTreeRef.value还没来的及与ElTree绑定， 值为undefined  所以放到nextTick中\n        elTreeRef.value?.setCheckedKeys(leaveNodeKeys, false)\n      })\n    }\n    const [handleAddClick, handleEditClick, modalData, pageModalRef] = usePageModal(addCallBack, editCallBack)\n    return {\n      //配置:\n      formConfig,\n      tableConfig,\n      modalConfig,\n\n      //实例:\n      pageModalRef,\n      elTreeRef,\n\n      //数据:\n      modalData,\n      pageModalTitle,\n      allMenuList,\n      otherFormData,\n\n      //事件:\n      handleAddClick,\n      handleEditClick,\n      addCallBack,\n      editCallBack,\n      handleCheck\n    }\n  }\n})\n","import { render } from \"./role.vue?vue&type=template&id=61408e56&scoped=true&ts=true\"\nimport script from \"./role.vue?vue&type=script&lang=ts\"\nexport * from \"./role.vue?vue&type=script&lang=ts\"\n\nimport \"./role.vue?vue&type=style&index=0&id=61408e56&scoped=true&lang=less\"\n\nimport exportComponent from \"C:\\\\Users\\\\25843\\\\Desktop\\\\code\\\\vue3-ts-cms\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-61408e56\"]])\n\nexport default __exports__"],"sourceRoot":""}